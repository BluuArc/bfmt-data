{
  "version": 3,
  "file": "app.css",
  "sources": [
    "..\\..\\..\\App.svelte",
    "..\\..\\..\\DetailSummaryTree.svelte"
  ],
  "sourcesContent": [
    "<script>\nimport '../node_modules/dialog-polyfill/dist/dialog-polyfill.css';\nimport { onMount, tick } from 'svelte';\nimport { bfServer, activeDataType, sortParameters } from './stores';\nimport {\n\tSERVERS,\n\tDATA_TYPES_BY_SERVER,\n\tSERVER_NAME_MAPPING,\n\tSORT_TYPES,\n} from './constants';\nimport { worker as bfmtDataWorker } from './bfmtData';\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow';\nimport dialogPolyfill from 'dialog-polyfill';\nimport EntryViewer from './EntryViewer.svelte';\nconst allSortTypes = Object.keys(SORT_TYPES);\nconst pageSize = 100;\n\nlet lastKnownServer;\nlet lastQueriedServer;\nlet lastQueriedDataType;\nlet lastTextQuery;\nlet navigationContextChanged = false;\nlet localActiveDataType = '';\nlet possibleActiveDataTypes = [];\nlet localSortType;\nlet localSortMultiplier;\nlet textQuery = '';\nlet searchResultPromise = Promise.resolve([]);\nlet searchKey;\nlet searchIndex = 0;\nlet activeKey;\nlet storedScrollPosition;\nlet totalEntries;\nlet entryDialog;\nlet modalCloseButton;\nlet lastFocusedElement;\nlet entryLink;\nlet atTop = true;\nlet scrollY = 0;\nlet isLoading = true;\nlet isFirstLoad = true;\nconst activeDataTypeUnsubscribe = activeDataType.subscribe((dataType) => {\n\tlocalActiveDataType = dataType || '';\n});\n\nconst bfServerUnsubscribe = bfServer.subscribe((server) => {\n\tif (isFirstLoad) {\n\t\tlastKnownServer = server;\n\t\tisFirstLoad = false;\n\t}\n\tpossibleActiveDataTypes = (DATA_TYPES_BY_SERVER[server] || DATA_TYPES_BY_SERVER.default).slice();\n\t// update active data type on server change\n\tif (!localActiveDataType || lastKnownServer !== server) {\n\t\tactiveDataType.set(possibleActiveDataTypes[0]);\n\t}\n\tlastKnownServer = server;\n});\n\n$: navigationContextChanged = lastKnownServer !== lastQueriedServer || localActiveDataType !== lastQueriedDataType;\n$: atTop = scrollY === 0;\n\n// saving and setting focus state based on whether the dialog is open\n$: if (activeKey) {\n\tlastFocusedElement = document.activeElement;\n\tif (!entryDialog.showModal) {\n\t\tdialogPolyfill.registerDialog(entryDialog);\n\t}\n\tentryDialog.showModal();\n\ttick().then(() => {\n\t\tmodalCloseButton.focus();\n\t});\n}\n\n$: if (!activeKey && lastFocusedElement) {\n\ttick().then(() => {\n\t\tlastFocusedElement.focus();\n\t\tlastFocusedElement = null;\n\t});\n}\n\nconst sortParameterUnsubscribe = sortParameters.subscribe((params = '') => {\n\t[localSortType, localSortMultiplier] = params.split(',');\n});\n\nfunction search() {\n\tconst searchContext = {\n\t\tsearchKey,\n\t\tserver: lastQueriedServer,\n\t\tdataType: lastQueriedDataType,\n\t\ttextQuery,\n\t\tsortType: localSortType,\n\t\tsortMultiplier: +localSortMultiplier,\n\t\tpageSize,\n\t};\n\n\tisLoading = true;\n\tif (searchContext.textQuery !== lastTextQuery) {\n\t\tsearchResultPromise = bfmtDataWorker.getEntriesForSearch(\n\t\t\tsearchContext.server,\n\t\t\tsearchContext.dataType,\n\t\t\t{\n\t\t\t\tfilters: {\n\t\t\t\t\ttext: searchContext.textQuery,\n\t\t\t\t},\n\t\t\t\tsortType: searchContext.sortType,\n\t\t\t\tsortMultiplier: searchContext.sortMultiplier,\n\t\t\t\tmaxResultSize: searchContext.pageSize,\n\t\t\t},\n\t\t).then((result) => {\n\t\t\tlastTextQuery = searchContext.textQuery;\n\t\t\treturn result;\n\t\t});\n\t} else {\n\t\tsearchResultPromise = bfmtDataWorker.updateSearchContextSort(\n\t\t\tsearchContext.searchKey,\n\t\t\t{\n\t\t\t\tsortType: searchContext.sortType,\n\t\t\t\tsortMultiplier: searchContext.sortMultiplier,\n\t\t\t\tmaxResultSize: searchContext.pageSize,\n\t\t\t},\n\t\t);\n\t}\n\n\tsearchResultPromise = searchResultPromise.then((result) => {\n\t\tbfServer.set(searchContext.server);\n\t\tactiveDataType.set(searchContext.dataType);\n\t\tsortParameters.set(`${searchContext.sortType},${searchContext.sortMultiplier}`);\n\t\tsearchKey = result.searchKey;\n\t\tsearchIndex = 0;\n\t\ttotalEntries = result.totalEntries;\n\t\treturn result.results;\n\t}).finally(() => {\n\t\tisLoading = false;\n\t});\n}\n\nfunction setPageDataContext () {\n\tisLoading = true;\n\tsearchResultPromise = bfmtDataWorker.getUpdateStatsForServerAndDataType(\n\t\tlastKnownServer,\n\t\tlocalActiveDataType,\n\t\t{\n\t\t\tsortType: localSortType,\n\t\t\tsortMultiplier: +localSortMultiplier,\n\t\t\tmaxResultSize: pageSize,\n\t\t},\n\t).then((result) => {\n\t\tlastQueriedServer = lastKnownServer;\n\t\tlastQueriedDataType = localActiveDataType;\n\t\ttextQuery = '';\n\t\tlastTextQuery = '';\n\t\tsearchKey = result.searchKey;\n\t\tsearchIndex = 0;\n\t\ttotalEntries = result.totalEntries;\n\t\treturn result.results;\n\t}).finally(() => {\n\t\tisLoading = false;\n\t});\n}\n\nfunction getEntryName ({ key = '', value = {} } = {}) {\n\treturn value.name ? `${value.name} (${key})` : key;\n}\n\nfunction getEntryDate ({ value = { bfmtMetadata: { updatedAt: '' } }} = {}) {\n\treturn formatDistanceToNow(new Date(value.bfmtMetadata.updatedAt), { addSuffix: true });\n}\n\nfunction getEntriesForPage (index) {\n\tisLoading = true;\n\tsearchResultPromise = bfmtDataWorker.getEntriesInSearchContext(\n\t\tsearchKey,\n\t\tMath.max(Math.min(index, totalEntries), 0),\n\t\tpageSize,\n\t).then((result) => {\n\t\tsearchIndex = index;\n\t\treturn result;\n\t}).finally(() => {\n\t\tisLoading = false;\n\t});\n}\n\nonMount(() => {\n\twindow.bfmtData = bfmtDataWorker;\n\tsetPageDataContext();\n});\n\n$: if (activeKey) {\n\tstoredScrollPosition = window.scrollY;\n\tentryLink = `https://joshuacastor.me/bfmt-data/${$bfServer}/${$activeDataType}/${activeKey}.json`;\n} else {\n\twindow.scrollTo(0, storedScrollPosition);\n}\n</script>\n\n<svelte:window bind:scrollY={scrollY}/>\n\n<dialog bind:this={entryDialog} on:close={() =>{ activeKey = '' }}>\n\t<header>\n\t\t<form method=\"dialog\">\n\t\t\t<button bind:this={modalCloseButton} value=\"cancel\">Close</button>\n\t\t\t<a href={entryLink}>View JSON (external)</a>\n\t\t</form>\n\t</header>\n\t<EntryViewer key={activeKey}/>\n</dialog>\n<main>\n\n\t<header>\n\t\t<nav id=\"page-header\">\n\t\t\t<form on:submit|preventDefault={setPageDataContext}>\n\t\t\t\t<span>Showing </span> <select\n\t\t\t\t\tname=\"data-type\"\n\t\t\t\t\tid=\"data-type\"\n\t\t\t\t\tbind:value={$activeDataType}\n\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t>\n\t\t\t\t\t{#each possibleActiveDataTypes as dataType}\n\t\t\t\t\t\t<option value={dataType}>{dataType}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t</select> <span> entries from the </span> <select\n\t\t\t\t\tname=\"server\"\n\t\t\t\t\tid=\"server\"\n\t\t\t\t\tbind:value={$bfServer}\n\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t>\n\t\t\t\t\t{#each SERVERS as server}\n\t\t\t\t\t\t<option value={server}>{SERVER_NAME_MAPPING[server] || server}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t</select> <span> server.</span>\n\n\t\t\t\t{#if navigationContextChanged}\n\t\t\t\t\t<button type=\"submit\" disabled={isLoading}>Update</button>\n\t\t\t\t{/if}\n\t\t\t</form>\n\n\t\t\t<a href=\"https://github.com/BluuArc/bfmt-data\" id=\"github-link\">GitHub</a>\n\t\t</nav>\n\t</header>\n\n\t<form on:submit|preventDefault={search} id=\"search-form\">\n\t\t<fieldset>\n\t\t\t<legend>Search and Sort</legend>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<label for=\"text-query\">Text Filter:</label>\n\t\t\t\t\t<input id=\"text-query\" name=\"text-query\" bind:value={textQuery} disabled={isLoading}>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<span>Sort by </span> <select\n\t\t\t\t\t\tname=\"sort-type\"\n\t\t\t\t\t\tid=\"sort-type\"\n\t\t\t\t\t\tbind:value={localSortType}\n\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#each allSortTypes as sortType}\n\t\t\t\t\t\t\t<option value={sortType}>{sortType}</option>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</select> <span> in </span> <select\n\t\t\t\t\t\tname=\"sort-order\"\n\t\t\t\t\t\tid=\"sort-order\"\n\t\t\t\t\t\tbind:value={localSortMultiplier}\n\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"1\">ascending</option>\n\t\t\t\t\t\t<option value=\"-1\">descending</option>\n\t\t\t\t\t</select> <span> order.</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<button type=\"submit\" disabled={isLoading}>Search</button>\n\t\t</fieldset>\n\t</form>\n\n\t<section>\n\t\t{#await searchResultPromise}\n\t\t\tLoading entries...\n\t\t{:then data}\n\t\t\t<ol id=\"result-list\">\n\t\t\t\t{#each data as entry, i (entry.key)}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span class=\"index-cell\">{searchIndex + i + 1}</span>\n\t\t\t\t\t\t<button class=\"name-cell\" on:click={() => { activeKey = entry.key; }}>\n\t\t\t\t\t\t\t{getEntryName(entry)}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<span class=\"date-cell\">{getEntryDate(entry)}</span>\n\t\t\t\t\t</li>\n\t\t\t\t{/each}\n\t\t\t</ol>\n\t\t{:catch error}\n\t\t\tError loading data.<br>{console.error(error) || error}\n\t\t{/await}\n\t\t<footer class:sticky={!activeKey}>\n\t\t\t<nav>\n\t\t\t\t<button disabled={searchIndex === 0} on:click={() => getEntriesForPage(searchIndex - pageSize)}>Previous {searchIndex !== 0 ? pageSize : '' }</button>\n\t\t\t\t<button disabled={atTop} on:click={() => { window.scrollTo(0, 0); } }>To Top</button>\n\t\t\t\t<button disabled={(searchIndex + pageSize) > totalEntries} on:click={() => getEntriesForPage(searchIndex + pageSize)}>Next {searchIndex + 2 * pageSize <= totalEntries ? pageSize : (totalEntries % pageSize)} </button>\n\t\t\t</nav>\n\t\t</footer>\n\t</section>\n</main>\n\n<style>\nmain {\n\tfont-family: Arial, Helvetica, sans-serif;\n}\n\nform ul {\n\tlist-style: none;\n\tpadding: 0;\n\tmargin: 0;\n}\n\nform li + li {\n\tmargin-top: 1em;\n}\n\n#search-form {\n\tpadding: 1em;\n}\n\n#search-form button[type='submit'] {\n\tmargin-top: 1em;\n}\n\nnav#page-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\nnav#page-header form {\n\tmargin-left: 1em;\n}\n\nnav#page-header a#github-link {\n\tflex: none;\n}\n\ndialog {\n\tmax-width: 100vw;\n}\n\ndialog header {\n\tposition: sticky;\n\ttop: 0;\n\tbackground: white;\n}\n\nform[method='dialog'] {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n#result-list {\n\tpadding: 0;\n\tmargin: 0;\n\tlist-style: none;\n\tpadding: 0;\n}\n\n#result-list li {\n\tdisplay: flex;\n\tpadding: 0.5em 1em;\n\tmin-height: max(48px, 1em);\n\talign-items: center;\n}\n\n#result-list li:nth-child(odd) {\n\tbackground-color: #eee;\n}\n\n#result-list li * {\n\tmargin: 0 0.25em;\n}\n\n#result-list li .index-cell, #result-list li .date-cell {\n\tflex: none;\n}\n\n#result-list li .name-cell {\n\tflex: 1;\n\tborder: 0;\n\tbackground: none;\n\ttext-align: left;\n\ttext-decoration: underline;\n\talign-self: stretch;\n}\n\n#result-list li .name-cell:hover {\n\tbackground: #ddd;\n\tcursor: pointer;\n}\n\nfooter.sticky {\n\tposition: sticky;\n\tbottom: 0;\n}\n\nfooter nav {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tmargin-top: 0.5em;\n\tpadding: 0.5em;\n\tbackground: white;\n\theight: 1.5em;\n}\n\nfooter nav button {\n\tflex: none;\n}\n</style>\n",
    "<script>\nexport let treeData = [];\nexport let rootName = 'root';\nexport let indentLevel = 0;\n\nlet isExpanded;\nfunction generateEmptyEntry () {\n\treturn {\n\t\tchildren: [],\n\t\tid: -1,\n\t\tname: `${rootName}: No properties found`,\n\t};\n}\n\n\n$: isExpanded = treeData.length === 1;\n</script>\n\n{#if treeData.length > 0}\n\t{#each treeData as leaf (leaf.id)}\n\t\t<details style={`margin-left: ${indentLevel / 2}em`} open={isExpanded}>\n\t\t\t<summary aria-disabled={leaf.children.length === 0}>{leaf.name}</summary>\n\t\t\t{#if leaf.children.length > 0}\n\t\t\t\t<svelte:self\n\t\t\t\t\ttreeData={leaf.children}\n\t\t\t\t\tindentLevel={indentLevel + 1}\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t</details>\n\t{/each}\n{:else}\n\t<svelte:self treeData={[generateEmptyEntry()]}/>\n{/if}\n\n<style>\ndetails {\n\tfont-family: Arial, Helvetica, sans-serif;\n}\n\nsummary {\n\tmargin: 0.5em 0;\n\tpadding: 0.25em;\n}\n\nsummary[aria-disabled='true']::-webkit-details-marker {\n\tdisplay: none;\n}\n\nsummary[aria-disabled='false']:hover {\n\tbackground: #ddd;\n\tcursor: pointer;\n}\n\nsummary[aria-disabled='true'] {\n\tlist-style: none;\n}\n\nsummary[aria-disabled='true']::before {\n\tcontent: \"\";\n\tline-height: 1em;\n\twidth: 0.5em;\n\theight: 0.5em;\n\tbackground-color: #ddd;\n\tborder-radius: 50%;\n\tfloat: left;\n\tpadding: 0.05em;\n\tmargin-top: 0.25em;\n\tmargin-right: 0.5em;\n}\n</style>\n"
  ],
  "names": [],
  "mappings": "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"
}